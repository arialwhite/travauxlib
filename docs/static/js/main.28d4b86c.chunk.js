(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(22)},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(4),c=n.n(r),i=(n(12),n(13),n(1)),o=(n(14),n(15),n(16),function(e){var t=e.company,n=e.deal,a=function(e){return e?e.split("-").reverse().join("/"):""}(e.date);return l.a.createElement("header",{className:"d-flex flex-row flex-nowrap mt-5"},l.a.createElement("div",{className:"p-2 col-7"},l.a.createElement("div",{className:"header-company"},l.a.createElement("div",{className:"header-line"},t.statutEntreprise," ",l.a.createElement("strong",null,t.name)),l.a.createElement("div",{className:"header-line"},t.address),l.a.createElement("div",{className:"header-line"},t.postalCode," ",t.city))),l.a.createElement("div",{className:"p-2 col"},l.a.createElement("div",{className:"header-deal pl-4"},l.a.createElement("div",{className:"header-line"},"Le ",a),l.a.createElement("div",{className:"header-line"},n.customerName),l.a.createElement("div",{className:"header-line"},n.billingAddress.address),l.a.createElement("div",{className:"header-line"},n.billingAddress.postalCode," ",n.billingAddress.city))))});n(17);var s,u=function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,"TVA ",e.taux,"%"),l.a.createElement("td",null,e.montant," \u20ac"))},m=function(e){var t=e.devis;return l.a.createElement("footer",{className:"block d-2"},l.a.createElement("h3",{className:"footer-title h3 mb-4"},"Totaux"),l.a.createElement("table",{className:"table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Total HT"),l.a.createElement("td",null,t.prixTotalHTAvantRemise," \u20ac")),l.a.createElement("tr",null,l.a.createElement("td",null,"Remise"),l.a.createElement("td",null,t.montantRemise," \u20ac")),l.a.createElement("tr",null,l.a.createElement("td",null,"Total HT apr\xe8s remise"),l.a.createElement("td",null,t.montantRemise+t.prixTotalHTAvantRemise," \u20ac")),t.montantsTVA.map(u),l.a.createElement("tr",null,l.a.createElement("td",null,"Total TTC"),l.a.createElement("td",null,t.prixTotalTTC," \u20ac")))))};!function(e){e[e.BY_LOT=0]="BY_LOT",e[e.BY_LOCATION=1]="BY_LOCATION"}(s||(s={}));var d={displayMode:s.BY_LOT},p={label:"Autres prestations",surface:null,uuid:"default"};function E(e,t){if(!e)return[];var n=function(e){return e.concat([p]).map(function(e){return{location:e,lines:[]}})}(t);return e.flatMap(function(e){return e.lots}).flatMap(function(e){return e.lignes}).reduce(f,n).filter(function(e){return e.lines.length>0})}function f(e,t){return function(e,t){return e.filter(function(e){return t.some(function(t){return t===e.location.uuid})})}(e,function(e){var t=e.locationsDetails.locations;return t&&t.length?t.map(function(e){return e.uuid}):[p.uuid]}(t)).forEach(function(e){return e.lines.push(t)}),e}n(18),n(19);var v=function(e){var t=e.line,n=e.index;return l.a.createElement("tr",{key:n},l.a.createElement("td",null,l.a.createElement("div",{className:"pr-2 content-line-designation"},t.designation),l.a.createElement("div",{className:"mt-2 mb-4 pr-2 content-line-description"},t.description)),l.a.createElement("td",null,t.prixUnitaireHT," \u20ac"),l.a.createElement("td",null,t.quantite),l.a.createElement("td",null,t.prixHT," \u20ac"))},N=function(e){var t=e.lines,n=e.label,a=e.totalHt,r=e.index;return l.a.createElement("div",{className:"content-group",key:r},l.a.createElement("h3",{className:"content-group-title h3 mb-4"},n," - ",a," \u20ac HT"),l.a.createElement("table",{className:"table"},l.a.createElement("colgroup",null,l.a.createElement("col",{className:"pr-5"}),l.a.createElement("col",{className:"content-group-column"}),l.a.createElement("col",{className:"content-group-column"}),l.a.createElement("col",{className:"content-group-column"})),l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"content-group-head",scope:"col"},"Description"),l.a.createElement("th",{className:"content-group-head",scope:"col"},"Prix unitaire HT"),l.a.createElement("th",{className:"content-group-head",scope:"col"},"Quantit\xe9"),l.a.createElement("th",{className:"content-group-head",scope:"col"},"Prix HT"))),l.a.createElement("tbody",null,t.map(function(e,t){return l.a.createElement(v,{line:e,index:t})}))))},h=function(e){var t=E(e.sections,e.locations);return l.a.createElement("div",{className:"content p-2"},t.map(function(e,t){return l.a.createElement(N,{lines:e.lines,label:e.location.label,totalHt:g(e),index:t})}))};function g(e){return e.lines.map(function(e){return e.prixHT}).reduce(function(e,t){return e+t})}var T=function(e){var t=e.section,n=e.index;return l.a.createElement("div",{className:"d-flex flex-column flex-nowrap m-2",key:n},t.lots.map(function(e,t){return l.a.createElement(N,{lines:e.lignes,label:e.label,totalHt:e.prixTotalHT,index:t})}))},b=function(e){var t=e.sections;return l.a.createElement("div",{className:"content p-2"},t.map(function(e,t){return l.a.createElement(T,{section:e,index:t})}))},x=function(e){var t=e.devis,n=function(e){switch(e.displayMode){case s.BY_LOCATION:return h;case s.BY_LOT:return b}}(e.viewConfig);return l.a.createElement("div",{className:"devis"},l.a.createElement("div",{className:"d-flex"},l.a.createElement("div",{className:"devis-logo mr-4"}),l.a.createElement("div",{className:"devis-title d-flex align-items-center"},t.title)),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(o,{company:t.company,deal:t.deal,date:t.date}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(n,{sections:t.sections,locations:t.locations}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(m,{devis:t}))};var y=n(2),w=n.n(y),O=n(5),C=(n(21),function(e){var t=e.viewConfig;return l.a.createElement("nav",null,l.a.createElement("ul",{className:"nav flex-column nav-pills"},A("Par lot",t.displayMode===s.BY_LOT,function(){return e.viewConfigChange({displayMode:s.BY_LOT})}),A("Par pi\xe8ce",t.displayMode===s.BY_LOCATION,function(){return e.viewConfigChange({displayMode:s.BY_LOCATION})})))});function A(e,t,n){var a=t?"nav-link active":"nav-link";return l.a.createElement("li",{className:"nav-item",onClick:n},l.a.createElement("span",{className:a},e))}var H=function(){var e=Object(a.useState)(d),t=Object(i.a)(e,2),n=t[0],r=t[1],c=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),l=n[0],r=n[1],c=Object(a.useState)(!0),o=Object(i.a)(c,2),s=o[0],u=o[1];return Object(a.useEffect)(function(){function t(){return(t=Object(O.a)(w.a.mark(function t(){var n,a;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,r(a),u(!1);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[e]),{loading:s,devis:l}}("/travaux.json"),o=c.loading,s=c.devis;return o?l.a.createElement("h4",{className:"h4"},"loading.."):l.a.createElement("div",{className:"App"},l.a.createElement(C,{viewConfig:n,viewConfigChange:r}),l.a.createElement(x,{viewConfig:n,devis:s}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Array.prototype.flatMap=function(e){return Array.prototype.concat.apply([],this.map(e))},c.a.render(l.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[6,1,2]]]);
//# sourceMappingURL=main.28d4b86c.chunk.js.map