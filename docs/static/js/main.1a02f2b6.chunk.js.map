{"version":3,"sources":["config.types.ts","devis/header/Header.tsx","devis/content/content.functions.ts","devis/content/ContentByLocation.tsx","devis/content/ContentByLot.tsx","devis/content/Content.tsx","devis/footer/Footer.tsx","devis/Devis.tsx","tools/Tools.tsx","App.tsx","devis/useDevis.ts","serviceWorker.ts","index.tsx"],"names":["DisplayMode","Header","props","company","deal","formattedDate","date","split","reverse","join","formatDate","react_default","a","createElement","className","statutEntreprise","name","address","postalCode","city","customerName","billingAddress","DEFAULT_VIEW_CONFIG","displayMode","BY_LOT","DEFAULT_LOCATION","label","surface","uuid","explodeByUuid","line","context","locations","locationsDetails","length","map","l","value","collector","acc","tuple","key","arr","get","push","set","add","ShowLocationGroup","group","index","location","lines","prixTotalHT","prixHT","reduce","x","y","ShowGroup","ContentByLocation","groups","sections","linesByUuid","flatMap","section","lots","lot","lignes","Map","concat","filter","item","getLinesByLocation","ShowLot","ShowSection","ContentByLot","ShowLine","designation","description","prixUnitaireHT","quantite","totalHt","scope","ShowTva","tva","taux","montant","Footer","devis","prixTotalHTAvantRemise","montantRemise","montantsTVA","prixTotalTTC","Devis","Content","viewConfig","BY_LOCATION","getContent","title","Header_Header","Footer_Footer","Tools","Link","viewConfigChange","active","callback","cssClass","onClick","App","_useState","useState","_useState2","Object","slicedToArray","setViewConfig","_useDevis","url","setDevis","_useState3","_useState4","loading","setLoading","useEffect","_fetchData","asyncToGenerator","regenerator_default","mark","_callee","response","json","wrap","_context","prev","next","fetch","sent","stop","apply","this","arguments","fetchData","useDevis","Tools_Tools","Devis_Devis","Boolean","window","hostname","match","Array","prototype","lambda","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"6QAIYA,uDCECC,qBAA0B,SAACC,GAAiB,IAC/CC,EAAwBD,EAAxBC,QAASC,EAAeF,EAAfE,KAEXC,EAuBR,SAAoBC,GAClB,OAAOA,EAAOA,EAAKC,MAAM,KAAKC,UAAUC,KAAK,KAAM,GAxB7BC,CAFUR,EAATI,MAIvB,OACEK,EAAAC,EAAAC,cAAA,UAAQC,UAAU,oCAChBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAeX,EAAQY,iBAAtC,IAAwDJ,EAAAC,EAAAC,cAAA,cAASV,EAAQa,OACzEL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAeX,EAAQc,SACtCN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAeX,EAAQe,WAAtC,IAAmDf,EAAQgB,QAG/DR,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAf,MAAiCT,GACjCM,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAeV,EAAKgB,cACnCT,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAeV,EAAKiB,eAAeJ,SAClDN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAeV,EAAKiB,eAAeH,WAAlD,IAA+Dd,EAAKiB,eAAeF,qBDrBjFnB,uEASL,IAAMsB,EAAkC,CAC7CC,YAAavB,EAAYwB,QEVrBC,EAA6B,CAAEC,MAAO,qBAAsBC,QAAS,KAAMC,KAAM,WA2BvF,SAASC,EAAcC,GACrB,IAasBC,EAbhBC,EAAYF,EAAKG,iBAAiBD,UAExC,OAAIA,GAAaA,EAAUE,OAClBF,EAAUG,IAAI,SAAAC,GAAC,OAAIA,EAAER,OAAMO,KAUdJ,EAV2BD,EAW1C,SAACO,GAAD,MAAc,CAACA,EAAON,MATpB,CAAC,CAAC,UAAWD,IAiBxB,SAASQ,EAAgBC,EAAkBC,GACzC,OASF,SAAmBL,EAAuBM,EAAQJ,GAChD,IAAMK,EAAMP,EAAIQ,IAAIF,GAChBC,EACFA,EAAIE,KAAKP,GAETF,EAAIU,IAAIJ,EAAK,CAACJ,IAEhB,OAAOF,EAhBAW,CAAIP,EAAKC,EAAM,GAAIA,EAAM,IC/ClC,IAAMO,EAAoB,SAACC,EAAkBC,GAC3C,IAAMC,EAAWF,EAAM,GACjBG,EAAQH,EAAM,GAEdI,EAAcD,EAAMhB,IAAI,SAAAL,GAAI,OAAIA,EAAKuB,SAAQC,OAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,IAExE,OAAOC,EAAUN,EAAOD,EAASxB,MAAO0B,EAAaH,IAG1CS,EAA6B,SAACxD,GAAwB,IAG3DyD,EDTD,SAA4BC,EAA0B5B,GAC3D,IAAK4B,EACH,MAAO,GAET,IAAMC,EAAcD,EAASE,QAAQ,SAAAC,GAAO,OAAIA,EAAQC,OACrDF,QAAQ,SAAAG,GAAG,OAAIA,EAAIC,SACnBJ,QAAQjC,GACRyB,OAAOhB,EAAW,IAAI6B,KAMzB,OAJiCnC,EAAUoC,OAAO,CAAC3C,IAChDU,IAAI,SAAAe,GACH,MAAO,CAACA,EAAUW,EAAYlB,IAAIO,EAAStB,SAEjCyC,OAAO,SAAAC,GAAI,OAAIA,EAAK,GAAGpC,OAAS,ICJ/BqC,CAFiBrE,EAAxB0D,SAAwB1D,EAAd8B,WAIlB,OACErB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACZ6C,EAAOxB,IAAIY,KCfZyB,SAAU,SAACP,EAAUhB,GAAX,OAA6BQ,EAAUQ,EAAIC,OAAQD,EAAIvC,MAAOuC,EAAIb,YAAaH,KAEzFwB,EAAc,SAACV,EAAkBd,GAAnB,OAClBtC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qCAAqC2B,IAAKQ,GACtDc,EAAQC,KAAK7B,IAAIqC,KAITE,EAAwB,SAACxE,GAAwB,IACpD0D,EAAa1D,EAAb0D,SAER,OACEjD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACZ8C,EAASzB,IAAIsC,KCDb,IAAME,EAAW,SAAC7C,EAAYmB,GAAb,OACtBtC,EAAAC,EAAAC,cAAA,MAAI4B,IAAKQ,GACPtC,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iCACZgB,EAAK8C,aAERjE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,2CACZgB,EAAK+C,cAGVlE,EAAAC,EAAAC,cAAA,UAAKiB,EAAKgD,eAAV,WACAnE,EAAAC,EAAAC,cAAA,UAAKiB,EAAKiD,UACVpE,EAAAC,EAAAC,cAAA,UAAKiB,EAAKuB,OAAV,aAISI,EAAY,SAACN,EAAoBzB,EAAesD,EAAiB/B,GAC5E,OACAtC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBAAgB2B,IAAKQ,GAClCtC,EAAAC,EAAAC,cAAA,MAAIC,UAAU,+BAA+BY,EAA7C,MAAuDsD,EAAvD,cACArE,EAAAC,EAAAC,cAAA,SAAOC,UAAU,SACfH,EAAAC,EAAAC,cAAA,gBACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACfH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yBACfH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yBACfH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,0BAEjBH,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,MAAIC,UAAU,qBAAqBmE,MAAM,OAAzC,eACAtE,EAAAC,EAAAC,cAAA,MAAIC,UAAU,qBAAqBmE,MAAM,OAAzC,oBACAtE,EAAAC,EAAAC,cAAA,MAAIC,UAAU,qBAAqBmE,MAAM,OAAzC,eACAtE,EAAAC,EAAAC,cAAA,MAAIC,UAAU,qBAAqBmE,MAAM,OAAzC,aAGJtE,EAAAC,EAAAC,cAAA,aACGsC,EAAMhB,IAAIwC,OCnDbO,SAAU,SAACC,EAAUlC,GAAX,OACdtC,EAAAC,EAAAC,cAAA,MAAI4B,IAAKQ,GACPtC,EAAAC,EAAAC,cAAA,iBAASsE,EAAIC,KAAb,KACAzE,EAAAC,EAAAC,cAAA,UAAKsE,EAAIE,QAAT,cAISC,EAA0B,SAACpF,GAAiB,IAC/CqF,EAAUrF,EAAVqF,MAER,OACE5E,EAAAC,EAAAC,cAAA,UAAQC,UAAU,aAChBH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,wBAAd,UACAH,EAAAC,EAAAC,cAAA,SAAOC,UAAU,SACfH,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,UAAK0E,EAAMC,uBAAX,YAEF7E,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,UAAK0E,EAAME,cAAX,YAEF9E,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAAA,UAAK0E,EAAME,cAAgBF,EAAMC,uBAAjC,YAEDD,EAAMG,YAAYvD,IAAI+C,GACvBvE,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,UAAK0E,EAAMI,aAAX,gBC1BCC,EAAyB,SAAC1F,GAAiB,IAC9CqF,EAAsBrF,EAAtBqF,MAEFM,EFCD,SAAoBC,GACzB,OAAQA,EAAWvE,aACjB,KAAKvB,EAAY+F,YAAa,OAAOrC,EACrC,KAAK1D,EAAYwB,OAAQ,OAAOkD,GEJlBsB,CAFc9F,EAAf4F,YAIf,OACEnF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACfH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yCAAyCyE,EAAMU,QAEhEtF,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,WACNF,EAAAC,EAAAC,cAACqF,EAAD,CAAQ/F,QAASoF,EAAMpF,QAASC,KAAMmF,EAAMnF,KAAME,KAAMiF,EAAMjF,OAC9DK,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,WACNF,EAAAC,EAAAC,cAACgF,EAAD,CAASjC,SAAU2B,EAAM3B,SAAU5B,UAAWuD,EAAMvD,YACpDrB,EAAAC,EAAAC,cAAA,WAAMF,EAAAC,EAAAC,cAAA,WACNF,EAAAC,EAAAC,cAACsF,EAAD,CAAQZ,MAAOA,6BCnBRa,SAAyB,SAAClG,GAAiB,IAC/C4F,EAAc5F,EAAd4F,WAKP,OACEnF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,MAAIC,UAAU,6BACVuF,EAAK,UAAaP,EAAWvE,cAAiBvB,EAAYwB,OANjD,kBAAMtB,EAAMoG,iBAAiB,CAAC/E,YAAavB,EAAYwB,WAOhE6E,EAAK,eAAaP,EAAWvE,cAAiBvB,EAAY+F,YAN5C,kBAAM7F,EAAMoG,iBAAiB,CAAC/E,YAAavB,EAAY+F,oBAY/E,SAASM,EAAK3E,EAAe6E,EAAiBC,GAC5C,IAAMC,EAAWF,EAAS,kBAAoB,WAE9C,OACE5F,EAAAC,EAAAC,cAAA,MAAIC,UAAU,WAAW4F,QAASF,GAChC7F,EAAAC,EAAAC,cAAA,QAAMC,UAAW2F,GAAW/E,ICrBlC,IAoBeiF,EAZO,WAAM,IAAAC,EACYC,mBAAqBvF,GADjCwF,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAClBd,EADkBgB,EAAA,GACNG,EADMH,EAAA,GAAAI,ECRJ,SAACC,GAAgB,IAAAP,EACXC,qBADWC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAC9BrB,EAD8BuB,EAAA,GACvBM,EADuBN,EAAA,GAAAO,EAEPR,oBAAkB,GAFXS,EAAAP,OAAAC,EAAA,EAAAD,CAAAM,EAAA,GAE9BE,EAF8BD,EAAA,GAErBE,EAFqBF,EAAA,GAerC,OAXAG,oBAAU,WAAM,SAAAC,IAAA,OAAAA,EAAAX,OAAAY,EAAA,EAAAZ,CAAAa,EAAAhH,EAAAiH,KACd,SAAAC,IAAA,IAAAC,EAAAC,EAAA,OAAAJ,EAAAhH,EAAAqH,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACyBC,MAAMlB,GAD/B,cACQY,EADRG,EAAAI,KAAAJ,EAAAE,KAAA,EAEqBL,EAASC,OAF9B,OAEQA,EAFRE,EAAAI,KAGElB,EAASY,GACTR,GAAW,GAJb,wBAAAU,EAAAK,SAAAT,OADcU,MAAAC,KAAAC,YAAA,WAAAhB,EAAAc,MAAAC,KAAAC,WAQdC,IACC,CAACxB,IAEG,CAACI,UAAShC,SDLQqD,CAAS,iBAA5BrB,EAFkBL,EAElBK,QAAShC,EAFS2B,EAET3B,MAEjB,OAAOgC,EAVL5G,EAAAC,EAAAC,cAAA,MAAIC,UAAU,MAAd,aAWAH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAACgI,EAAD,CAAO/C,WAAYA,EAAYQ,iBAAkBW,IACjDtG,EAAAC,EAAAC,cAACiI,EAAD,CAAOhD,WAAYA,EAAYP,MAAOA,MEVxBwD,QACW,cAA7BC,OAAO9F,SAAS+F,UAEe,UAA7BD,OAAO9F,SAAS+F,UAEhBD,OAAO9F,SAAS+F,SAASC,MACvB,2DCTNC,MAAMC,UAAUtF,QAAU,SAASuF,GAC/B,OAAOF,MAAMC,UAAUhF,OAAOoE,MAAM,GAAIC,KAAKtG,IAAIkH,KAGrDC,IAASC,OAAO5I,EAAAC,EAAAC,cAAC2I,EAAD,MAASC,SAASC,eAAe,SD4H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.1a02f2b6.chunk.js","sourcesContent":["/**\n * Configuration of the view\n */\n\nexport enum DisplayMode {\n  BY_LOT,\n  BY_LOCATION\n}\n\nexport type ViewConfig = {\n  displayMode: DisplayMode;\n};\n\nexport const DEFAULT_VIEW_CONFIG: ViewConfig = {\n  displayMode: DisplayMode.BY_LOT\n};","import React from 'react';\nimport './Header.css';\nimport { Company, Deal, LOCAL_DATE } from '../devis.types';\n\ntype Props = { company: Company, deal: Deal, date: LOCAL_DATE };\n\nexport const Header: React.FC<Props> = (props: Props) => {\n  const { company, deal, date } = props;\n\n  const formattedDate = formatDate(date);\n\n  return (\n    <header className=\"d-flex flex-row flex-nowrap mt-5\">\n      <div className=\"p-2 col-7\">\n        <div className=\"header-company\">\n          <div className=\"header-line\">{company.statutEntreprise} <strong>{company.name}</strong></div>\n          <div className=\"header-line\">{company.address}</div>\n          <div className=\"header-line\">{company.postalCode} {company.city}</div>\n        </div>\n      </div>\n      <div className=\"p-2 col\">\n        <div className=\"header-deal pl-4\">\n          <div className=\"header-line\">Le {formattedDate}</div>\n          <div className=\"header-line\">{deal.customerName}</div>\n          <div className=\"header-line\">{deal.billingAddress.address}</div>\n          <div className=\"header-line\">{deal.billingAddress.postalCode} {deal.billingAddress.city}</div>\n        </div>\n      </div>\n    </header>\n  );\n}\n\nfunction formatDate(date: LOCAL_DATE): string {\n  return date ? date.split('-').reverse().join('/'): '';\n}","import { Line, Section, Location } from \"../devis.types\";\n\nexport type LineGroup = [Location, Array<Line>];\n\nconst DEFAULT_LOCATION: Location = { label: 'Autres prestations', surface: null, uuid: 'default' };\n\n/**\n * Group the lines by their locations\n * @param sections \n * @param locations \n */\nexport function getLinesByLocation(sections: Array<Section>, locations: Array<Location>): Array<LineGroup> {\n  if (!sections) {\n    return [];\n  }\n  const linesByUuid = sections.flatMap(section => section.lots)\n    .flatMap(lot => lot.lignes)\n    .flatMap(explodeByUuid)\n    .reduce(collector, new Map<string, Line[]>());\n\n  const result: Array<LineGroup> = locations.concat([DEFAULT_LOCATION])\n    .map(location => {\n      return [location, linesByUuid.get(location.uuid)]\n    });\n  return result.filter(item => item[1].length > 0);\n}\n\n/**\n * Creates item for each location of a line, but keep the line\n * @param line \n */\nfunction explodeByUuid(line: Line): Array<[string, Line]> {\n  const locations = line.locationsDetails.locations;\n\n  if (locations && locations.length) {\n    return locations.map(l => l.uuid).map(pairWith(line));\n  } else {\n    return [['default', line]];\n  }\n}\n\n/**\n * Store two related values together\n * @param context \n */\nfunction pairWith<T, U>(context: T): (u: U) => [U, T] {\n  return (value: U) => [value, context];\n}\n\n/**\n * Collect tuples into a Map\n * @param acc \n * @param tuple \n */\nfunction collector<T, U>(acc: Map<T, U[]>, tuple: [T, U]): Map<T, U[]> {\n  return add(acc, tuple[0], tuple[1]);\n}\n\n/**\n * Add an item to an Array value of a map\n * @param map \n * @param key \n * @param value \n */\nfunction add<T, U>(map: Map<T, Array<U>>, key: T, value: U): Map<T, Array<U>> {\n  const arr = map.get(key);\n  if (arr) {\n    arr.push(value);\n  } else {\n    map.set(key, [value]);\n  }\n  return map;\n}","/**\n * Content component - By location variation\n */\n\nimport React from 'react';\nimport { Content, ContentProps, ShowGroup } from \"./Content\";\nimport { LineGroup, getLinesByLocation } from './content.functions';\n\nconst ShowLocationGroup = (group: LineGroup, index: number) => {\n  const location = group[0];\n  const lines = group[1];\n\n  const prixTotalHT = lines.map(line => line.prixHT).reduce((x, y) => x + y);\n\n  return ShowGroup(lines, location.label, prixTotalHT, index) \n}\n\nexport const ContentByLocation: Content = (props: ContentProps) => {\n  const { sections, locations } = props;\n\n  const groups = getLinesByLocation(sections, locations);\n\n  return (\n    <div className=\"content p-2\">\n      {groups.map(ShowLocationGroup)}\n    </div>\n  );\n}","/**\n * Content component - By lot variation\n */\n\nimport React from 'react';\nimport './Content.css';\nimport { Section, Lot } from '../devis.types';\nimport { Content, ContentProps, ShowGroup } from './Content';\n\nconst ShowLot = (lot: Lot, index: number) => ShowGroup(lot.lignes, lot.label, lot.prixTotalHT, index);\n\nconst ShowSection = (section: Section, index: number) => (\n  <div className=\"d-flex flex-column flex-nowrap m-2\" key={index}>\n    {section.lots.map(ShowLot)}\n  </div>\n);\n\nexport const ContentByLot: Content = (props: ContentProps) => {\n  const { sections } = props;\n\n  return (\n    <div className=\"content p-2\">\n      {sections.map(ShowSection)}\n    </div>\n  );\n}","/**\n * Content component - Common \n */\n\nimport React from 'react';\nimport { Section, Location, Line } from '../devis.types';\nimport { DisplayMode, ViewConfig } from '../../config.types';\nimport { ContentByLocation } from './ContentByLocation';\nimport { ContentByLot } from './ContentByLot';\n\nexport type ContentProps = { sections: Array<Section>, locations: Array<Location> };\n\nexport type Content = React.FC<ContentProps>;\n\nexport function getContent(viewConfig: ViewConfig): Content {\n  switch (viewConfig.displayMode) {\n    case DisplayMode.BY_LOCATION: return ContentByLocation;\n    case DisplayMode.BY_LOT: return ContentByLot;\n  }\n}\n\nexport const ShowLine = (line: Line, index: number) => (\n  <tr key={index}>\n    <td>\n      <div className=\"pr-2 content-line-designation\">\n        {line.designation}\n      </div>\n      <div className=\"mt-2 mb-4 pr-2 content-line-description\">\n        {line.description}\n      </div>\n    </td>\n    <td>{line.prixUnitaireHT} €</td>\n    <td>{line.quantite}</td>\n    <td>{line.prixHT} €</td>\n  </tr>\n);\n\nexport const ShowGroup = (lines: Array<Line>, label: string, totalHt: number, index: number) => {\n  return (\n  <div className=\"content-group\" key={index}>\n    <h3 className=\"content-group-title h3 mb-4\">{label} - {totalHt} € HT</h3>\n    <table className=\"table\">\n      <colgroup>\n        <col className=\"pr-5\" />\n        <col className=\"content-group-column\" />\n        <col className=\"content-group-column\" />\n        <col className=\"content-group-column\" />\n      </colgroup>\n      <thead>\n        <tr>\n          <th className=\"content-group-head\" scope=\"col\">Description</th>\n          <th className=\"content-group-head\" scope=\"col\">Prix unitaire HT</th>\n          <th className=\"content-group-head\" scope=\"col\">Quantité</th>\n          <th className=\"content-group-head\" scope=\"col\">Prix HT</th>\n        </tr>\n      </thead>\n      <tbody>\n        {lines.map(ShowLine)}\n      </tbody>\n    </table>\n  </div>\n  ); \n};","import React from 'react';\nimport './Footer.css';\nimport { Devis, Tva } from '../devis.types';\n\ntype Props = { devis: Devis };\n\nconst ShowTva = (tva: Tva, index: number) => (\n  <tr key={index}>\n    <td>TVA {tva.taux}%</td>\n    <td>{tva.montant} €</td>\n  </tr>\n);\n\nexport const Footer: React.FC<Props> = (props: Props) => {\n  const { devis } = props;\n\n  return (\n    <footer className=\"block d-2\">\n      <h3 className=\"footer-title h3 mb-4\">Totaux</h3>\n      <table className=\"table\">\n        <tbody>\n          <tr>\n            <td>Total HT</td>\n            <td>{devis.prixTotalHTAvantRemise} €</td>\n          </tr>\n          <tr>\n            <td>Remise</td>\n            <td>{devis.montantRemise} €</td>\n          </tr>\n          <tr>\n            <td>Total HT après remise</td>\n            <td>{devis.montantRemise + devis.prixTotalHTAvantRemise} €</td>\n          </tr>\n          {devis.montantsTVA.map(ShowTva)}\n          <tr>\n            <td>Total TTC</td>\n            <td>{devis.prixTotalTTC} €</td>\n          </tr>\n        </tbody>\n      </table>\n    </footer>\n  );\n}\n","import React from 'react';\nimport './Devis.css';\nimport { Header } from './header/Header';\nimport { getContent } from './content/Content';\nimport { Footer } from './footer/Footer';\nimport { Devis as DevisModel } from './devis.types';\nimport { ViewConfig } from '../config.types';\n\ntype Props = { devis: DevisModel, viewConfig: ViewConfig };\n\nexport const Devis: React.FC<Props> = (props: Props) => {\n  const { devis, viewConfig } = props;\n\n  const Content = getContent(viewConfig);\n\n  return (\n    <div className=\"devis\">\n      <div className=\"d-flex\">\n        <div className=\"devis-logo mr-4\"></div>\n        <div className=\"devis-title d-flex align-items-center\">{devis.title}</div>\n      </div>\n      <br /><br />\n      <Header company={devis.company} deal={devis.deal} date={devis.date}></Header>\n      <br /><br />\n      <Content sections={devis.sections} locations={devis.locations}></Content>\n      <br /><br />\n      <Footer devis={devis}></Footer>\n    </div>\n  );\n}\n","import React from 'react';\nimport './Tools.css';\nimport { ViewConfig, DisplayMode } from '../config.types';\n\ntype ViewConfigHandler = (v: ViewConfig) => void;\ntype Props = {viewConfigChange: ViewConfigHandler, viewConfig: ViewConfig}\n\nexport const Tools: React.FC<Props> = (props: Props) => {\n  const {viewConfig} = props;\n\n  const setByLot = () => props.viewConfigChange({displayMode: DisplayMode.BY_LOT});\n  const setByLocation = () => props.viewConfigChange({displayMode: DisplayMode.BY_LOCATION});\n\n  return (\n    <nav>\n      <ul className=\"nav flex-column nav-pills\">\n        { Link('Par lot',   viewConfig.displayMode ===  DisplayMode.BY_LOT,      setByLot) }\n        { Link('Par pièce', viewConfig.displayMode ===  DisplayMode.BY_LOCATION, setByLocation)  }\n      </ul>\n    </nav>\n  );\n};\n\nfunction Link(label: string, active: boolean, callback: () => void) {\n  const cssClass = active ? \"nav-link active\" : \"nav-link\";\n\n  return (\n    <li className=\"nav-item\" onClick={callback}>\n      <span className={cssClass}>{label}</span>\n    </li>\n  )\n}\n","import React, { useState } from 'react';\nimport './App.css';\nimport { Devis } from './devis/Devis';\nimport { useDevis } from './devis/useDevis';\nimport { Tools } from './tools/Tools';\nimport { ViewConfig, DEFAULT_VIEW_CONFIG } from './config.types';\n\nconst Loading = () => {\n  return (\n    <h4 className=\"h4\">\n      loading..\n    </h4>\n  );\n};\n\nconst App: React.FC = () => {\n  const [ viewConfig, setViewConfig ] = useState<ViewConfig>(DEFAULT_VIEW_CONFIG);\n  const { loading, devis } = useDevis(\"/travaux.json\");\n\n  return loading ? Loading() : (\n    <div className=\"App\">\n      <Tools viewConfig={viewConfig} viewConfigChange={setViewConfig}></Tools>\n      <Devis viewConfig={viewConfig} devis={devis}></Devis>\n    </div>\n  );\n}\n\nexport default App;\n","import { useState, useEffect } from \"react\";\nimport { Devis } from \"./devis.types\";\n\n/**\n * Fetch devis from Devis-pro endpoint\n * @param url Devis-pro url\n */\nexport const useDevis = (url: string) => {\n    const [devis, setDevis] = useState<Devis>();\n    const [loading, setLoading] = useState<boolean>(true);\n  \n    useEffect(() => {\n      async function fetchData(): Promise<any> {\n        const response = await fetch(url);\n        const json = await response.json();\n        setDevis(json);\n        setLoading(false);\n      }\n    \n      fetchData();\n    }, [url]);\n  \n    return {loading, devis};\n  };\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// es2019 shim\n// eslint-disable-next-line\nArray.prototype.flatMap = function(lambda) { \n    return Array.prototype.concat.apply([], this.map(lambda)); \n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}