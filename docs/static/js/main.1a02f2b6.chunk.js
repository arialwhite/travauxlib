(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a(21)},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,l=a(0),r=a.n(l),c=a(4),i=a.n(c),o=(a(12),a(13),a(1)),s=(a(14),a(15),a(16),function(e){var t=e.company,a=e.deal,n=function(e){return e?e.split("-").reverse().join("/"):""}(e.date);return r.a.createElement("header",{className:"d-flex flex-row flex-nowrap mt-5"},r.a.createElement("div",{className:"p-2 col-7"},r.a.createElement("div",{className:"header-company"},r.a.createElement("div",{className:"header-line"},t.statutEntreprise," ",r.a.createElement("strong",null,t.name)),r.a.createElement("div",{className:"header-line"},t.address),r.a.createElement("div",{className:"header-line"},t.postalCode," ",t.city))),r.a.createElement("div",{className:"p-2 col"},r.a.createElement("div",{className:"header-deal pl-4"},r.a.createElement("div",{className:"header-line"},"Le ",n),r.a.createElement("div",{className:"header-line"},a.customerName),r.a.createElement("div",{className:"header-line"},a.billingAddress.address),r.a.createElement("div",{className:"header-line"},a.billingAddress.postalCode," ",a.billingAddress.city))))});!function(e){e[e.BY_LOT=0]="BY_LOT",e[e.BY_LOCATION=1]="BY_LOCATION"}(n||(n={}));var m={displayMode:n.BY_LOT},u={label:"Autres prestations",surface:null,uuid:"default"};function d(e){var t,a=e.locationsDetails.locations;return a&&a.length?a.map(function(e){return e.uuid}).map((t=e,function(e){return[e,t]})):[["default",e]]}function p(e,t){return function(e,t,a){var n=e.get(t);n?n.push(a):e.set(t,[a]);return e}(e,t[0],t[1])}var E=function(e,t){var a=e[0],n=e[1],l=n.map(function(e){return e.prixHT}).reduce(function(e,t){return e+t});return T(n,a.label,l,t)},f=function(e){var t=function(e,t){if(!e)return[];var a=e.flatMap(function(e){return e.lots}).flatMap(function(e){return e.lignes}).flatMap(d).reduce(p,new Map);return t.concat([u]).map(function(e){return[e,a.get(e.uuid)]}).filter(function(e){return e[1].length>0})}(e.sections,e.locations);return r.a.createElement("div",{className:"content p-2"},t.map(E))},v=(a(17),function(e,t){return T(e.lignes,e.label,e.prixTotalHT,t)}),N=function(e,t){return r.a.createElement("div",{className:"d-flex flex-column flex-nowrap m-2",key:t},e.lots.map(v))},h=function(e){var t=e.sections;return r.a.createElement("div",{className:"content p-2"},t.map(N))};var g=function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("div",{className:"pr-2 content-line-designation"},e.designation),r.a.createElement("div",{className:"mt-2 mb-4 pr-2 content-line-description"},e.description)),r.a.createElement("td",null,e.prixUnitaireHT," \u20ac"),r.a.createElement("td",null,e.quantite),r.a.createElement("td",null,e.prixHT," \u20ac"))},T=function(e,t,a,n){return r.a.createElement("div",{className:"content-group",key:n},r.a.createElement("h3",{className:"content-group-title h3 mb-4"},t," - ",a," \u20ac HT"),r.a.createElement("table",{className:"table"},r.a.createElement("colgroup",null,r.a.createElement("col",{className:"pr-5"}),r.a.createElement("col",{className:"content-group-column"}),r.a.createElement("col",{className:"content-group-column"}),r.a.createElement("col",{className:"content-group-column"})),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"content-group-head",scope:"col"},"Description"),r.a.createElement("th",{className:"content-group-head",scope:"col"},"Prix unitaire HT"),r.a.createElement("th",{className:"content-group-head",scope:"col"},"Quantit\xe9"),r.a.createElement("th",{className:"content-group-head",scope:"col"},"Prix HT"))),r.a.createElement("tbody",null,e.map(g))))},b=(a(18),function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,"TVA ",e.taux,"%"),r.a.createElement("td",null,e.montant," \u20ac"))}),y=function(e){var t=e.devis;return r.a.createElement("footer",{className:"block d-2"},r.a.createElement("h3",{className:"footer-title h3 mb-4"},"Totaux"),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Total HT"),r.a.createElement("td",null,t.prixTotalHTAvantRemise," \u20ac")),r.a.createElement("tr",null,r.a.createElement("td",null,"Remise"),r.a.createElement("td",null,t.montantRemise," \u20ac")),r.a.createElement("tr",null,r.a.createElement("td",null,"Total HT apr\xe8s remise"),r.a.createElement("td",null,t.montantRemise+t.prixTotalHTAvantRemise," \u20ac")),t.montantsTVA.map(b),r.a.createElement("tr",null,r.a.createElement("td",null,"Total TTC"),r.a.createElement("td",null,t.prixTotalTTC," \u20ac")))))},w=function(e){var t=e.devis,a=function(e){switch(e.displayMode){case n.BY_LOCATION:return f;case n.BY_LOT:return h}}(e.viewConfig);return r.a.createElement("div",{className:"devis"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"devis-logo mr-4"}),r.a.createElement("div",{className:"devis-title d-flex align-items-center"},t.title)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(s,{company:t.company,deal:t.deal,date:t.date}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(a,{sections:t.sections,locations:t.locations}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y,{devis:t}))},x=a(2),O=a.n(x),C=a(5),A=(a(20),function(e){var t=e.viewConfig;return r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav flex-column nav-pills"},k("Par lot",t.displayMode===n.BY_LOT,function(){return e.viewConfigChange({displayMode:n.BY_LOT})}),k("Par pi\xe8ce",t.displayMode===n.BY_LOCATION,function(){return e.viewConfigChange({displayMode:n.BY_LOCATION})})))});function k(e,t,a){var n=t?"nav-link active":"nav-link";return r.a.createElement("li",{className:"nav-item",onClick:a},r.a.createElement("span",{className:n},e))}var B=function(){var e=Object(l.useState)(m),t=Object(o.a)(e,2),a=t[0],n=t[1],c=function(e){var t=Object(l.useState)(),a=Object(o.a)(t,2),n=a[0],r=a[1],c=Object(l.useState)(!0),i=Object(o.a)(c,2),s=i[0],m=i[1];return Object(l.useEffect)(function(){function t(){return(t=Object(C.a)(O.a.mark(function t(){var a,n;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,r(n),m(!1);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[e]),{loading:s,devis:n}}("/travaux.json"),i=c.loading,s=c.devis;return i?r.a.createElement("h4",{className:"h4"},"loading.."):r.a.createElement("div",{className:"App"},r.a.createElement(A,{viewConfig:a,viewConfigChange:n}),r.a.createElement(w,{viewConfig:a,devis:s}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Array.prototype.flatMap=function(e){return Array.prototype.concat.apply([],this.map(e))},i.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[6,1,2]]]);
//# sourceMappingURL=main.1a02f2b6.chunk.js.map